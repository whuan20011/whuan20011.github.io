---
layout: post
title: 8queen|python
---

é¢˜ç›®å¤§æ„ï¼šè¿™é“é¢˜ç›®æ˜¯åœ¨æˆ‘åˆ·USACOè¿‡ç¨‹ä¸­è‡ªå·±å†™çš„ä¸€é“å¾ˆç»å…¸å¾ˆç»å…¸çš„å…«çš‡åğŸ‘¸é—®é¢˜ã€‚é¢˜æ„ä¸ºï¼šæœ‰ä¸€ä¸ª8*8çš„æ£‹ç›˜ï¼Œ å…±64ä¸ªæ ¼å­ï¼Œ å¼€å§‹æ¯ä¸ªæ ¼å­ä¸­æ•°å­—å‡ä¸º0ã€‚è¦æ±‚æ˜¯
å¦‚æœä¸€ä¸ªçš‡åå ä¸€ä¸ªæ ¼å­ï¼Œ é‚£ä¹ˆè¿™ä¸ªæ ¼å­çš„æ¨ªï¼Œç«–å’Œæ–œæ–¹éƒ½ä¸èƒ½æœ‰å…¶ä»–çš‡åã€‚ é—®é¢˜æ˜¯å…±æœ‰æœ‰å¤šå°‘ç§æ”¾ç½®è¿™å…«ä¸ªçš‡åçš„æ–¹æ³•ï¼Ÿ

é¢˜ç›®è¯¦è§£ï¼šæ¯æ¬¡æŸ¥çœ‹ä¸€è¡Œï¼Œ å³æ­¤è¡Œçš„å…«ä¸ªæ ¼å­ï¼Œ è°ƒç”¨can_put_queenå‡½æ•°å¾—çŸ¥æ­¤æ ¼å­èƒ½å¦æ”¾ç½®çš‡åï¼Œ å¦‚æœå¯ä»¥ï¼Œ copyä¸€ä¸‹å½“å‰çš„æ¿å­ï¼Œå°†æ­¤æ ¼å­ç½®ä¸º1ï¼Œ å†æŸ¥çœ‹
æœ¬è¡Œçš„å…¶ä»–æ ¼å­ï¼Œç›´è‡³å…«è¡Œå…¨éƒ¨ç»“æŸã€‚

ç®—æ³•ï¼š dfsï¼ˆæ·±åº¦ä¼˜å…ˆç®—æ³•ï¼‰

import copy
def queen8(num, board):
    #numä¸º0ï¼Œ è¯æ˜å‡½æ•°å·²ç»è¿›è¡Œäº†å…«æ¬¡ï¼Œ å³æ’å®Œç¬¬å…«è¡Œç»“æŸã€‚
    if num == 0:
        #ä½¿ç”¨å¤–éƒ¨å®šä¹‰çš„å…¨å±€å˜é‡res
        global res
        res += 1
        print "------------------------------------------------"
        #æ‰“å°å‡ºæ­¤ç§æƒ…å†µä¸‹æ¿å­è¢«å…«çš‡åå é¢†çš„æ ·å­
        for c in range(8):
            print board[c]
        #é€€å‡ºæ­¤å‡½æ•°
        return
    else:
        #ä¾‹å¦‚ç¬¬ä¸€æ¬¡numä¸º8ï¼Œ å¼€å§‹åœ¨ç¬¬0è¡Œä¸ºç¬¬ä¸€ä¸ªçš‡åæ‰¾ä½ç½®
        row = 8 - num
        #æ£€æµ‹æœ¬è¡Œçš„å…«ä¸ªæ ¼å­ï¼Œ æ˜¯å¦æœ‰æ ¼å­ç¬¦åˆè¦æ±‚
        for col in range(0, 8):
            #å¦‚æœå½“å‰æ ¼å­å¯ä»¥æ”¾çš‡åï¼Œ æä¸€å—æ–°æ¿å­æ”¾ç½®å½“å‰çš‡å
            if can_put_queen(row, col, board):
                new_board = copy.deepcopy(board)
                new_board[row][col] = 1
                queen8(num - 1, new_board)
def can_put_queen(row, col, board):
    #å½“å‰æ ¼å­æ‰€åœ¨åˆ—ä¸èƒ½æœ‰å…¶ä»–çš‡åï¼Œ æœ‰åˆ™è¿”å›false
    for i in range(0, row):
        if board[i][col] == 1:
            return False
    #å‘å·¦ä¸‹è§’ä¸€ä¸ªä¸€ä¸ªæ£€æµ‹ï¼Œ æ‰€åœ¨å·¦æ–œæ–¹æœ‰æ²¡æœ‰çš‡å
    row_to_leftdown = row
    col_to_leftup = col
    while row_to_leftdown >= 0 and col_to_leftup >= 0:
        if board[row_to_leftdown][col_to_leftup] == 0:
            row_to_leftdown -= 1
            col_to_leftup -= 1
        else:
            return False
    #å‘å³ä¸‹è§’ä¸€ä¸ªä¸€ä¸ªæ£€æµ‹ï¼Œ æ‰€åœ¨å³æ–œæ–¹æœ‰æ²¡æœ‰çš‡å
    row_to_leftup = row
    col_to_leftup = col
    while row_to_leftup >= 0 and col_to_leftup <= 7:
        if board[row_to_leftup][col_to_leftup] == 0:
            row_to_leftup -= 1
            col_to_leftup += 1
        else:
            return False
    #ä¸‰ä¸ªæ–¹å‘éƒ½æ²¡æœ‰çš‡åï¼Œ è¿”å›true
    return True
board = []
#listæ˜¯å¯ä»¥æ”¹å˜çš„ã€‚
for h in range(0, 8):
    arr = []
    for w in range(0, 8):
        arr.append(0)
    board.append(arr)
res = 0
queen8(8, board)
print res

    
