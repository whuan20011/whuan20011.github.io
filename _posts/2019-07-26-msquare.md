---
layout: post
title: Magic Squares
---

é¢˜ç›®å¤§æ„ï¼šæœ‰å…«ä¸ªç›¸åŒå¤§å°çš„æ–¹æ ¼ï¼Œ åˆ†æˆä¸¤è¡Œï¼Œ ä¸Šé¢å››æ ¼ï¼Œ ä¸‹é¢å››æ ¼ï¼Œæ–¹æ ¼ä¸­æ•°å­—çš„å­˜æ”¾é¡ºåºæ˜¯é¡ºæ—¶é’ˆğŸ”ƒå­˜æ”¾1ï¼Œ 2ï¼Œ 3ï¼Œ 4ï¼Œ 5ï¼Œ 6ï¼Œ 7ï¼Œ 8ã€‚æœ‰ä¸‰ç§å˜å½¢æ–¹å¼ï¼Œ ç¬¬ä¸€ç§æ˜¯æŠŠç¬¬ä¸€è¡Œå’Œç¬¬äºŒè¡Œæ–¹æ ¼
ä½ç½®å¯¹è°ƒï¼Œ ç¬¬äºŒç§æ–¹å¼æ˜¯æŠŠæœ€å³ä¸€åˆ—å˜æˆæœ€å·¦ä¸€åˆ—ï¼Œ å…¶ä½™ä¸å˜ã€‚ç¬¬ä¸‰ç§æ–¹å¼æ˜¯æŠŠä¸­é—´å››ä¸ªæ–¹æ ¼ï¼ˆå³ç¬¬äºŒåˆ—å’Œç¬¬ä¸‰åˆ—ï¼‰æŒ‰é¡ºæ—¶é’ˆæ–¹å‘è½¬åŠ¨ä¸€æ ¼ã€‚é—®é¢˜æ˜¯å¦‚ä½•æŠŠæœ€åˆçš„æ•°å­—
å½¢å¼ç»è¿‡æœ€å°‘çš„å˜æ¢æ¬¡æ•°å˜æ¢æˆç»™å®šæ•°æ®çš„é¡ºåºã€‚

é¢˜ç›®è¯¦è§£ï¼šæœ¬é¢˜æ—¢å¯ä»¥ç”¨dfsè§£ç­”åˆå¯ä»¥ç”¨bfsè§£ç­”ï¼Œ ä½†æ˜¯ç”¨dfsè§£ç­”è€—æ—¶è¿‡é•¿ï¼Œ å› ä¸ºæ¯ä¸€ä¸ªæå¹²ç»è¿‡å¤šæ¬¡å˜æ¢æœ€åå¯èƒ½éƒ½ä¼šå˜æˆæˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œ ä½†å¹¶ä¸ä¸€å®šæ˜¯æœ€å°‘æ¬¡æ•°çš„ï¼Œ æ‰€ä»¥ä¸€ç›´åœ¨å„ä¸ªæä¸Šæ·±åº¦æœç´¢ä¸‹å»å°†è€—è´¹å¤§é‡æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨bfsè¿›è¡Œå¹¿åº¦æœç´¢ï¼Œ 1å˜3ï¼Œ 3å˜9ï¼Œ 9å˜27ï¼Œæœ€åå‡ºæ¥çš„å°±æ˜¯æœ€å°‘æ¬¡æ•°å¾—åˆ°çš„ç»“æœã€‚å…·ä½“è§£æ³•å¦‚ä»£ç æ³¨é‡Šã€‚

ç®—æ³•ï¼šbfsï¼ˆå¹¿åº¦ä¼˜å…ˆç®—æ³•ï¼‰

```python
"""
ID: whuan2001
LANG: PYTHON2
TASK: msquare
"""
def solution():
    fin = open("msquare.in", "r")
    fout = open("msquare.out", "w")
    a = map(int, fin.readline().strip().split())
    target = [[a[0], a[1], a[2], a[3]], [a[7], a[6], a[5], a[4]]]
    initial = [[1, 2, 3, 4], [8, 7, 6, 5]]
    #bfså¼€å§‹
    queue = [(initial, 0, "")]
    visited = set()
    while queue:
        cur = queue.pop(0)
        x = tuple(cur[0][0])
        y = tuple(cur[0][1])
        #å› ä¸ºvisitedä¸ºsetï¼Œæ²¡æœ‰list of setï¼Œå› ä¸ºlistä¸èƒ½hashï¼Œ å³ä¸èƒ½è¿›è¡Œå»é‡æ“ä½œï¼Œ æ‰€ä»¥è¿™é‡Œå“¦å“¦ä»¬ç”¨tuple, (x, y)æ”¾åˆ°visitedé‡Œé¢å»ã€‚
        if (x, y) in visited:
            continue
        else:
            visited.add((x, y))
        #æ‰¾åˆ°ç›®æ ‡ï¼Œ å³è¿”å›ğŸ”™
        if cur[0] == target:
            print >>fout, cur[1]
            print >>fout, cur[2]
            return
        #éƒ½ä¸ç¬¦åˆç›®æ ‡ç»“æœï¼Œ å°±æŠŠæ¯ç§æƒ…å†µå†è¿›è¡Œä¸‰æ¬¡å˜æ¢
        else:
            temp_A = exchange_top_bottom(cur[0])
            queue.append((temp_A, cur[1] + 1, cur[2] + "A"))
            temp_B = single_right_shift(cur[0])
            queue.append((temp_B, cur[1] + 1, cur[2] + "B"))
            temp_C = rotation_middle4(cur[0])
            queue.append((temp_C, cur[1] + 1, cur[2] + "C"))
def exchange_top_bottom(arr):
    a, b, c, d, e, f, g, h = arr[0][0], arr[0][1], arr[0][2], arr[0][3], arr[1][0], arr[1][1], arr[1][2], arr[1][3]
    return [[e, f, g, h], [a, b, c, d]]
def single_right_shift(arr):
    a, b, c, d, e, f, g, h = arr[0][0], arr[0][1], arr[0][2], arr[0][3], arr[1][0], arr[1][1], arr[1][2], arr[1][3]
    return [[d, a, b, c], [h, e, f, g]]
def rotation_middle4(arr):
    a, b, c, d, e, f, g, h = arr[0][0], arr[0][1], arr[0][2], arr[0][3], arr[1][0], arr[1][1], arr[1][2], arr[1][3]
    return [[a, f, b, d], [e, g, c, h]]
if __name__ == "__main__":
    solution()
```
