---
layout: post
title: USACO training|3.2|Sweet Butter|butter|Python
---

é¢˜ç›®å¤§æ„ï¼šæœ‰Nå¤´ç‰›ğŸ®ï¼Œ På—è‰åœ°ï¼Œ Cæ¡è·¯ï¼ˆä¸¤å—è‰åœ°ä¹‹é—´æœ€å¤šåªæœ‰ä¸€æ¡ç›´æ¥è·¯å¾„ï¼‰ï¼Œ Nå¤´ğŸ®åˆ†åˆ«åœ¨ä¸åŒçš„è‰åœ°ä¸Šåƒè‰ï¼Œ æ±‚é—®ï¼š åœ¨å“ªå—è‰åœ°ä¸Šæ”¾é»„æ²¹ï¼Œ æ‰€æœ‰ç‰›è¿‡æ¥çš„è·¯å¾„æœ€çŸ­ã€‚

é¢˜ç›®è¯¦è§£ï¼šæ­¤é¢˜ä¸ºæœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œ å³å¯¹ä»»æ„ä¸€å—è‰åœ°ï¼Œ è®¡ç®—è¿™å—è‰åœ°åˆ°Nå¤´ç‰›æ‰€åœ¨è‰åœ°çš„æœ€çŸ­è·¯å¾„ä¹‹å’Œï¼Œ æ±‚å‡ºæ‹¥æœ‰è·¯å¾„ä¹‹å’Œæœ€çŸ­çš„é‚£å—è‰åœ°ï¼Œ è¾“å‡ºæœ€çŸ­è·¯å¾„ä¹‹å’Œã€‚

ç®—æ³•ï¼šdijkstraï¼ˆæœ€çŸ­è·¯å¾„ç®—æ³•ï¼‰+ heap

```python
"""
ID: whuan2001
LANG: PYTHON2
TASK: butter
"""
from heapq import *
def solution():
    fin = open("butter.in", "r")
    fout = open("butter.out", "w")
    # è·å–è¾“å…¥æ•°æ®ï¼Œ ğŸ®æ‰€åœ¨è‰åœ°æ”¾å…¥cow-in-pasture
    N, P, C = map(int, fin.readline().strip().split())
    cow_in_pasture = []
    for _ in range(N):
        cow_in_pasture.append(int(fin.readline().strip()))
    #æ¯ä¸¤å—è‰åœ°åŠä¹‹é—´è·¯å¾„é•¿åº¦æ”¾å…¥dic, æ–¹ä¾¿ä¼ ç»™dijlstraä½œä¸ºå‚æ•°ï¼Œ ä¹Ÿå¯å­˜å…¥äºŒç»´list
    dic = {}
    for _ in range(C):
        a, b, dis = map(int, fin.readline().strip().split())
        if a not in dic:
            dic[a] = {}
        dic[a][b] = dis
        if b not in dic:
            dic[b] = {}
        dic[b][a] = dis
    minimum_dis = 10000000
    #å¯¹ä»»ä¸€å—è‰åœ°ï¼Œ è°ƒç”¨dijkstraå‡½æ•°ï¼Œ ç®—å‡ºæœ¬è‰åœ°åˆ°å…¶ä»–å„è‰åœ°çš„æœ€çŸ­è·¯å¾„
    for pasture in range(1, P + 1):
        pasture_dis = dijkstra(P, dic, pasture)
        cur_dis = 0
        #è®¡ç®—ğŸ®æ‰€åœ¨çš„é‚£äº›è‰åœ°åˆ°é»„æ²¹è‰åœ°çš„æœ€çŸ­è·¯å¾„ä¹‹å’Œ
        for cow_grazing in cow_in_pasture:
            cur_dis += pasture_dis[cow_grazing]
        #æ‰¿ä¸Šé¢ä»£ç ç®—å‡ºä¹‹åï¼Œ ä¸å…¶å®ƒè‰åœ°ç®—å‡ºçš„æœ€çŸ­è·¯å¾„ä¹‹å’Œè¿›è¡Œæ¯”è¾ƒï¼Œ æ‰¾æœ€å°
        minimum_dis = min(minimum_dis, cur_dis)
    print >>fout, minimum_dis
#æœ€çŸ­è·¯å¾„ç®—æ³•ï¼Œ å…¶è®¡ç®—ä»æºç‚¹srcåˆ°å…¶ä»–å„ä¸ªç‚¹çš„æœ€çŸ­è·¯å¾„
def dijkstra(P, dic, src):
    #è®¾ç½®è®¿é—®è¿‡çš„èŠ‚ç‚¹é›†åˆsetï¼Œ setæ–¹ä¾¿æŸ¥æ‰¾
    visited = set()
    #è®¾ç½®src_disï¼Œè¡¨ç¤ºä»æºç‚¹åˆ°å„ç‚¹æ¯æ¬¡æ›´æ–°åçš„æƒ…å†µï¼Œ æ²¡æœ‰ç›´æ¥æ›´æ–°dic, æ˜¯å› ä¸ºè¿™æ ·æ›´æ¸…æ¥šï¼Œ ä¹Ÿé¿å…æ›´æ–°dicé€ æˆæ­»å¾ªç¯
    src_dis = {src: 0}
    #ç”¨heapé€Ÿåº¦å¿«ï¼Œpopç›´æ¥æ‰¾å‡ºå½“å‰æœ€çŸ­ï¼Œ ä»£ç å¼€å¤´è¦å†™from heapq import *, ä¹Ÿå¯ä»¥ä¸ç”¨heapï¼Œ ç”¨forå¾ªç¯æ‰¾å½“å‰æœ€çŸ­ï¼Œ ä½†é€Ÿåº¦è¾ƒæ…¢
    heap = []
    heappush(heap, (0, src))
    for _ in range(P):
        #æ‰¾å‡ºå½“å‰æœ€çŸ­è·¯
        temp = heappop(heap)
        while temp[1] in visited:
            temp = heappop(heap)
        cur_mini_dis, next_p = temp
        #æ‰¾å‡ºå½“å‰æœ€çŸ­è·¯å¾„çš„ç‚¹åï¼Œ æŸ¥æ‰¾è¯¥ç‚¹çš„é‚»å±…ï¼Œ çœ‹æ˜¯å¦èƒ½å¯¹åŸç‚¹è·¯å¾„è¿›è¡Œæ›´æ–°
        for n, d in dic[next_p].items():
            if n not in src_dis:
                src_dis[n] = cur_mini_dis + d
                heappush(heap, (src_dis[n], n))
            else:
                if cur_mini_dis + d < src_dis[n]:
                    src_dis[n] = cur_mini_dis + d
                    heappush(heap, (src_dis[n], n))
        #æŠŠè®¿é—®è¿‡çš„èŠ‚ç‚¹åŠ å…¥visited
        visited.add(next_p)
    return src_dis
if __name__ == "__main__":
    solution()             
```
